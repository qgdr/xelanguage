# 返回值

Rust 使用
```rust
enum Result<T, E> {
    Ok(T),
    Err(E),
}
```
以及
```rust
pub enum Option<T> {
    Some(T),
    None
}
```
C++23也引入了
```cpp
std::expect<T, E>

```
的机制。

但是，这些语法不够优雅!

我们设计一个语法糖: `T?[E]`，在没有第二个类型的情况下 `T?` 默认为 `T?[None]`.

```
fn main() {
    let f: File?[io.Error] <- File.open("hello.txt");

    let f: File <- if f.ok() {f?} else {panic("Problem opening the file: {:?}", error)};
}
```
或
```
fn main() {
    let f: File?[io.Error] <- File.open("hello.txt");

    let f: File <1 f? ,
                2> error -> panic("Problem opening the file: {:?}", error);
}
```


```
fn read_username_from_file() -> String?[io.Error] {
    // 打开文件，f类似`Result<文件句柄,io::Error>`
    let f: String?[io::Error] <- File.open("hello.txt");

    // 创建动态字符串s
    let s <- String.new();

    return  f?  1> ID.read_to_string(s@),
                2> ID ;
}

```
`ID` 是一个特殊的宏 `ID = x -> x`.
