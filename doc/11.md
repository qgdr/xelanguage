# 返回值

Rust 使用
```rust
enum Result<T, E> {
    Ok(T),
    Err(E),
}
```
以及
```rust
pub enum Option<T> {
    Some(T),
    None
}
```
C++23也引入了
```cpp
std::expect<T, E>

```
的机制。

但是，这些语法不够优雅!

我们设计一个语法糖: `T?[E]`，在没有第二个类型的情况下 `T?` 默认为 `T?[None]`.

```rust
fn main() {
    let f: File?[io::Error] <| File.open("hello.txt");

    if f.ok() {
        let f: File <| f?;
    } else {
        panic("Problem opening the file: {:?}", f?);
    }
}
```
或
```rust
fn main() {
    let f: File?[io::Error] <| File.open("hello.txt");

    let f: File <1 f?
                2> error : io::Error -> panic("Problem opening the file: {:?}", error);
}
```
或
```rust
fn main() {
    let fe: File?[io::Error] <| File.open("hello.txt");

    let f: File;
    fe? 1> f
        2> error : io::Error -> panic("Problem opening the file: {:?}", error);
}
```
管道 `|>` 允许定向到变量。


```rust
fn read_username_from_file() -> String?[io.Error] {
    // 打开文件，f类似`Result<文件句柄,io::Error>`
    let f: String?[io::Error] <| File.open("hello.txt");

    // 创建动态字符串s
    let s <| String::new();

    return  f?  1> f: String -> f.read_to_string(s@)
                2> error: io::Error -> error ;
}

```
